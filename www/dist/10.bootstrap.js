"use strict";(self.webpackChunktic_tac_toe=self.webpackChunktic_tac_toe||[]).push([[10],{714:(t,e,i)=>{i.d(e,{$l:()=>c,Or:()=>u,PI:()=>_,Qg:()=>o,bL:()=>h,cH:()=>d,qb:()=>l});var s=i(152);t=i.hmd(t);let r=new("undefined"==typeof TextDecoder?(0,t.require)("util").TextDecoder:TextDecoder)("utf-8",{ignoreBOM:!0,fatal:!0});r.decode();let a=null;function n(t){return()=>{throw new Error(`${t} is not defined`)}}const h=Object.freeze({Empty:0,0:"Empty",Player1:1,1:"Player1",Player2:2,2:"Player2"}),l=Object.freeze({Draw:0,0:"Draw",Human:1,1:"Human",Computer:2,2:"Computer",InProgess:3,3:"InProgess"}),o=Object.freeze({EASY:0,0:"EASY",MODERATE:1,1:"MODERATE",HARD:2,2:"HARD"});class c{static __wrap(t){const e=Object.create(c.prototype);return e.ptr=t,e}__destroy_into_raw(){const t=this.ptr;return this.ptr=0,t}free(){const t=this.__destroy_into_raw();s.__wbg_board_free(t)}static new(){const t=s.board_new();return c.__wrap(t)}reset(){s.board_reset(this.ptr)}set_difficulty(t){s.board_set_difficulty(this.ptr,t)}get_difficulty(){return s.board_get_difficulty(this.ptr)>>>0}get_size(){return s.board_get_size(this.ptr)}make_next_valid_move(t){s.board_make_next_valid_move(this.ptr,t)}get_cells_ptr(){return s.board_get_cells_ptr(this.ptr)}set_cell(t,e){s.board_set_cell(this.ptr,t,e)}is_empty_cell(t){return 0!==s.board_is_empty_cell(this.ptr,t)}get_game_status(){return s.board_get_game_status(this.ptr)>>>0}}const d="function"==typeof Math.floor?Math.floor:n("Math.floor"),_="function"==typeof Math.random?Math.random:n("Math.random");function u(t,e){throw new Error((i=t,n=e,r.decode((null!==a&&a.buffer===s.memory.buffer||(a=new Uint8Array(s.memory.buffer)),a).subarray(i,i+n))));var i,n}},10:(t,e,i)=>{i.r(e);var s=i(714),r=i(152);(new class{constructor(){this.CELL_SIZE=100,this.size=3,this.num_cells=this.size*this.size,this.GRID_COLOR="#444444",this.player_1="Ã—",this.player_2="o",this.current_player=s.bL.Player1,this.document=document,this.board=s.$l.new(),this.canvas=this.getCanvas(),this.ctx=this.canvas.getContext("2d"),this.ctx.font="1 60px Verdana",this.ctx.textAlign="center",this.ctx.textBaseline="middle",this.animationId=null,this.endgame=!1,this.addCellToggleEventListener(),this.addLevelToggleEventListener(),this.addSymbolToggleEventListener(),this.addFirstPlayerEventListener()}getCanvas(){const t=this.document.getElementById("tic-tac-toe-canvas");return t.height=(this.CELL_SIZE+1)*this.size+1,t.width=(this.CELL_SIZE+1)*this.size+1,t}play(){this.renderLoop()}drawGrid(){this.ctx.beginPath(),this.ctx.strokeStyle=this.GRID_COLOR;for(let t=0;t<=this.size;t++)this.ctx.moveTo(t*(this.CELL_SIZE+1)+1,0),this.ctx.lineTo(t*(this.CELL_SIZE+1)+1,(this.CELL_SIZE+1)*this.size+1);for(let t=0;t<=this.size;t++)this.ctx.moveTo(0,t*(this.CELL_SIZE+1)+1),this.ctx.lineTo((this.CELL_SIZE+1)*this.size+1,t*(this.CELL_SIZE+1)+1);this.ctx.stroke()}getIndex(t,e){return t*this.size+e}renderLoop=()=>{this.drawGrid(),this.drawCells(),this.animationId=requestAnimationFrame(this.renderLoop)};addSymbolToggleEventListener(){this.document.getElementById("difficultyLevel").addEventListener("change",(t=>{this.board.set_difficulty(s.Qg[this.document.getElementById("difficultyLevel").value])}))}addLevelToggleEventListener(){this.document.getElementById("symbolToggler").addEventListener("change",(t=>{this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height),[this.player_1,this.player_2]=[this.player_2,this.player_1]}))}addFirstPlayerEventListener(){this.document.getElementById("firstPlayer").addEventListener("change",(t=>{this.board.reset(),this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height),"AI"==this.document.getElementById("firstPlayer").value&&this.makeFirstMove()}))}makeFirstMove(){this.next_player=this.current_player===s.bL.Player1?s.bL.Player2:s.bL.Player1,this.board.make_next_valid_move(this.next_player)}addCellToggleEventListener(){this.canvas.addEventListener("click",(t=>{const e=this.canvas.getBoundingClientRect(),i=this.canvas.width/e.width,r=this.canvas.height/e.height,a=(t.clientX-e.left)*i,n=(t.clientY-e.top)*r,h=Math.min(Math.floor(n/(this.CELL_SIZE+1)),this.size-1),l=Math.min(Math.floor(a/(this.CELL_SIZE+1)),this.size-1),o=this.getIndex(h,l);if(!this.board.is_empty_cell(o))return;this.board.set_cell(o,this.current_player),this.fillCellText(h,l,this.current_player),this.next_player=this.current_player===s.bL.Player1?s.bL.Player2:s.bL.Player1,this.board.make_next_valid_move(this.next_player);const c=this.board.get_game_status();c!==s.qb.Human&&c!==s.qb.Computer&&c!==s.qb.Draw||this.announceWinner(c)}))}announceWinner(t){t===s.qb.Human?alert("You are the winner!!"):t===s.qb.Computer?alert("You lost!!"):t===s.qb.Draw&&alert("Game is a draw!!"),this.board.reset(),this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height)}fillCellText(t,e,i){this.ctx.fillText(i===s.bL.Player1?this.player_1:i===s.bL.Player2?this.player_2:"",e*(this.CELL_SIZE+1)+1+50,t*(this.CELL_SIZE+1)+1+50)}drawCells(){const t=this.board.get_cells_ptr(),e=new Uint8Array(r.memory.buffer,t,this.num_cells);this.ctx.beginPath();for(let t=0;t<this.size;t++)for(let i=0;i<this.size;i++){const r=this.getIndex(t,i);this.ctx.fillText(e[r]===s.bL.Player1?this.player_1:e[r]===s.bL.Player2?this.player_2:"",i*(this.CELL_SIZE+1)+1+50,t*(this.CELL_SIZE+1)+1+50)}this.ctx.stroke()}}).play()},152:(t,e,i)=>{var s=i.w[t.id];t.exports=s,i(714),s[""]()}}]);